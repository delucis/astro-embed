---
import type { MastodonMediaAttachment } from './types';

interface Props {
	media: MastodonMediaAttachment;
}

const { media } = Astro.props;

if (media.type === 'unknown') {
	return;
}
---

{
	media.type === 'image' && media.preview_url && (
		<a href={media.url}>
			<img
				alt={media.description}
				class="mastodon-post-img"
				height={media.meta?.small?.height}
				src={media.preview_url}
				width={media.meta?.small?.width}
			/>
		</a>
	)
}
{
	(media.type === 'video' || media.type === 'gifv') && (
		<video
			aria-label={media.description}
			class="mastodon-post-video"
			controls
			height={media.meta?.original?.height}
			poster={media.preview_url}
			preload="metadata"
			src={media.url}
			width={media.meta?.original?.width}
			loop={media.type === 'gifv'}
		/>
	)
}
{
	media.type === 'audio' && (
		<audio
			aria-label={media.description}
			class="mastodon-post-audio"
			controls
			preload="metadata"
			src={media.url}
		/>
	)
}
