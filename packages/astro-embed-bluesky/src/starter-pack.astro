---
import {
	type AppBskyGraphDefs,
	AppBskyGraphStarterpack,
} from '@atcute/bluesky';
import { is } from '@atcute/lexicons';
import { atUriToStarterPackUri, starterPackOgImage } from './utils';
import Card from './card.astro';

interface Props {
	record: AppBskyGraphDefs.StarterPackViewBasic;
}

const { record } = Astro.props;

const pack = is(AppBskyGraphStarterpack.mainSchema, record.record)
	? record.record
	: null;
---

<Card
	href={atUriToStarterPackUri(record.uri)}
	image={{
		src: starterPackOgImage(record.uri),
		alt: pack?.name || 'Starter pack cover image',
	}}
	avatarUser={record.creator}
	title={pack?.name || ''}
	subtitle={`Starter pack by ${record.creator.displayName}`}
	description={pack?.description}
/>
